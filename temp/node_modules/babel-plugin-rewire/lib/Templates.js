'use strict';

Object.defineProperty(exports, "__esModule", {
	value: true
});
exports.filterWildcardImportTemplate = exports.enrichExportTemplate = exports.universalAccesorsTemplate = undefined;

var _babelTemplate = require('babel-template');

var _babelTemplate2 = _interopRequireDefault(_babelTemplate);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

var universalAccesorsTemplate = exports.universalAccesorsTemplate = (0, _babelTemplate2.default)('\nfunction GET_GLOBAL_VARIABLE_HANDLE_IDENTIFIER() {\n\ttry {\n\t\t\tif(!!global) {\n\t\t\t\t\treturn global;\n\t\t\t}\n\t} catch(e) {\n\t\t\ttry {\n\t\t\t\t\tif(!!window) {\n\t\t\t\t\t\t\treturn window;\n\t\t\t\t\t}\n\t\t\t} catch(e) {\n\t\t\t\t\treturn this;\n\t\t\t}\n\t}\n};\n\nvar UNIQUE_GLOBAL_MODULE_ID_IDENTIFIER = null;\nfunction GET_UNIQUE_GLOBAL_MODULE_ID_IDENTIFIER() {\n\tif(UNIQUE_GLOBAL_MODULE_ID_IDENTIFIER === null) {\n\t\tlet globalVariable = GET_GLOBAL_VARIABLE_HANDLE_IDENTIFIER();\n\t\tif(!globalVariable.__$$GLOBAL_REWIRE_NEXT_MODULE_ID__) {\n\t\t\tglobalVariable.__$$GLOBAL_REWIRE_NEXT_MODULE_ID__ = 0;\n\t\t}\n\t\tUNIQUE_GLOBAL_MODULE_ID_IDENTIFIER = __$$GLOBAL_REWIRE_NEXT_MODULE_ID__++;\n\t}\n\treturn UNIQUE_GLOBAL_MODULE_ID_IDENTIFIER;\n}\n\nfunction GET_REWIRE_REGISTRY_IDENTIFIER() {\n\tlet theGlobalVariable = GET_GLOBAL_VARIABLE_HANDLE_IDENTIFIER();\n\tif(!theGlobalVariable.__$$GLOBAL_REWIRE_REGISTRY__) {\n\t\ttheGlobalVariable.__$$GLOBAL_REWIRE_REGISTRY__ = Object.create(null);\n\t}\n\treturn __$$GLOBAL_REWIRE_REGISTRY__; \n}\n\nfunction GET_REWIRE_DATA_IDENTIFIER() {\n\tlet moduleId = GET_UNIQUE_GLOBAL_MODULE_ID_IDENTIFIER();\n\tlet registry = GET_REWIRE_REGISTRY_IDENTIFIER();\n\tlet rewireData = registry[moduleId];\n\tif(!rewireData) {\n\t\tregistry[moduleId] = Object.create(null);\n\t\trewireData = registry[moduleId];\n\t}\n\treturn rewireData;\n}\n\n(function registerResetAll() {\n\tlet theGlobalVariable = GET_GLOBAL_VARIABLE_HANDLE_IDENTIFIER();\n\tif(!theGlobalVariable[\'__rewire_reset_all__\']) {\n\t\ttheGlobalVariable[\'__rewire_reset_all__\'] = function() {\n\t\t\ttheGlobalVariable.__$$GLOBAL_REWIRE_REGISTRY__ = Object.create(null);\n\t\t};\n\t}\n})();\n\nvar INTENTIONAL_UNDEFINED = \'__INTENTIONAL_UNDEFINED__\';\n\nlet API_OBJECT_ID = {};\n\n(function() {\n\tfunction addPropertyToAPIObject(name, value) {\n\t\tObject.defineProperty(API_OBJECT_ID, name, { value: value, enumerable: false, configurable: true });\n\t}\n\n\taddPropertyToAPIObject(\'__get__\', UNIVERSAL_GETTER_ID);\n\taddPropertyToAPIObject(\'__GetDependency__\', UNIVERSAL_GETTER_ID);\n\taddPropertyToAPIObject(\'__Rewire__\', UNIVERSAL_SETTER_ID);\n\taddPropertyToAPIObject(\'__set__\', UNIVERSAL_SETTER_ID);\n\taddPropertyToAPIObject(\'__reset__\', UNIVERSAL_RESETTER_ID);\n\taddPropertyToAPIObject(\'__ResetDependency__\', UNIVERSAL_RESETTER_ID);\n\taddPropertyToAPIObject(\'__with__\', UNIVERSAL_WITH_ID);\n})();\n\nfunction UNIVERSAL_GETTER_ID(variableName) {\n\tlet rewireData = GET_REWIRE_DATA_IDENTIFIER();\n  if (rewireData[variableName] === undefined) {\n    return ORIGINAL_VARIABLE_ACCESSOR_IDENTIFIER(variableName);\n  } else {\n    var value = rewireData[variableName];\n    if (value === INTENTIONAL_UNDEFINED) {\n      return undefined;\n    } else {\n      return value;\n    }\n  }\n}\n\nORIGINAL_ACCESSOR\n\nfunction ASSIGNMENT_OPERATION_IDENTIFIER(variableName, value) {\n\tlet rewireData = GET_REWIRE_DATA_IDENTIFIER();\n\tif(rewireData[variableName] === undefined) {\n\t\treturn ORIGINAL_VARIABLE_SETTER_IDENTIFIER(variableName, value);\n\t} else {\n\t\treturn rewireData[variableName] = value;\n\t}\n}\n\nORIGINAL_SETTER;\n\nfunction UPDATE_OPERATION_IDENTIFIER(operation, variableName, prefix) {\n\tvar oldValue = UNIVERSAL_GETTER_ID(variableName);\n\tvar newValue = (operation === \'++\') ? oldValue + 1 : oldValue - 1;\n\tASSIGNMENT_OPERATION_IDENTIFIER(variableName, newValue);\n\treturn (prefix) ? newValue : oldValue;\n}\n\nfunction UNIVERSAL_SETTER_ID(variableName, value) {\n\tlet rewireData = GET_REWIRE_DATA_IDENTIFIER();\n\tif(typeof variableName === \'object\') {\n\t\tObject.keys(variableName).forEach(function(name) {\n\t\t\trewireData[name] = variableName[name];\n\t\t});\n\t} else {\n\t    if (value === undefined) {\n\t      rewireData[variableName] = INTENTIONAL_UNDEFINED\n\t    } else {\n\t      rewireData[variableName] = value\n\t    }\n\n        return function() {\n            UNIVERSAL_RESETTER_ID(variableName);\n        };\n\t}\n}\n\nfunction UNIVERSAL_RESETTER_ID(variableName) {\n\tlet rewireData = GET_REWIRE_DATA_IDENTIFIER();\n\tdelete rewireData[variableName];\n\tif(Object.keys(rewireData).length == 0) {\n\t\tdelete GET_REWIRE_REGISTRY_IDENTIFIER()[GET_UNIQUE_GLOBAL_MODULE_ID_IDENTIFIER];\n\t};\n}\n\nfunction UNIVERSAL_WITH_ID(object) {\n\tlet rewireData = GET_REWIRE_DATA_IDENTIFIER();\n\tvar rewiredVariableNames = Object.keys(object);\n\tvar previousValues = {};\n\n\tfunction reset() {\n\t\trewiredVariableNames.forEach(function(variableName) {\n\t\t\trewireData[variableName] = previousValues[variableName];\n\t\t});\n\t}\n\n\treturn function(callback) {\n\t\trewiredVariableNames.forEach(function(variableName) {\n\t\t\tpreviousValues[variableName] = rewireData[variableName];\n\t\t\trewireData[variableName] = object[variableName];\n\t\t});\n\t\tlet result = callback();\n\t\tif(!!result && typeof result.then == \'function\') {\n\t\t\tresult.then(reset).catch(reset);\n\t\t} else {\n\t\t\treset();\n\t\t}\n\t\treturn result;\n\t}\n}\n\n\n'); /*Copyright (c) 2015, Robert Binna <r.binna@synedra.com>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 Permission to use, copy, modify, and/or distribute this software for any
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 purpose with or without fee is hereby granted, provided that the above
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 copyright notice and this permission notice appear in all copies.
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.*/

var enrichExportTemplate = exports.enrichExportTemplate = (0, _babelTemplate2.default)('\nlet TYPEOFORIGINALEXPORTVARIABLE = typeof EXPORT_VALUE;\nfunction addNonEnumerableProperty(name, value) {\n\tObject.defineProperty(EXPORT_VALUE, name, { value: value, enumerable: false, configurable: true });\n}\n\nif((TYPEOFORIGINALEXPORTVARIABLE === \'object\' || TYPEOFORIGINALEXPORTVARIABLE === \'function\') && Object.isExtensible(EXPORT_VALUE)) {\n\taddNonEnumerableProperty(\'__get__\', UNIVERSAL_GETTER_ID);\n\taddNonEnumerableProperty(\'__GetDependency__\', UNIVERSAL_GETTER_ID);\n\taddNonEnumerableProperty(\'__Rewire__\', UNIVERSAL_SETTER_ID);\n\taddNonEnumerableProperty(\'__set__\', UNIVERSAL_SETTER_ID);\n\taddNonEnumerableProperty(\'__reset__\', UNIVERSAL_RESETTER_ID);\n\taddNonEnumerableProperty(\'__ResetDependency__\', UNIVERSAL_RESETTER_ID);\n\taddNonEnumerableProperty(\'__with__\', UNIVERSAL_WITH_ID);\n\taddNonEnumerableProperty(\'__RewireAPI__\', API_OBJECT_ID);\n}\n');

var filterWildcardImportTemplate = exports.filterWildcardImportTemplate = (0, _babelTemplate2.default)('\nfunction FILTER_WILDCARD_IMPORT_IDENTIFIER(wildcardImport={}) {\n\tlet validPropertyNames = Object.keys(wildcardImport).filter(function(propertyName) {\n\t\treturn  propertyName !== \'__get__\' &&\n\t\t\t\tpropertyName !== \'__set__\' &&\n\t\t\t\tpropertyName !== \'__reset__\' &&\n\t\t\t\tpropertyName !== \'__with__\' &&\n\n\t\t\t\tpropertyName !== \'__GetDependency__\' &&\n\t\t\t\tpropertyName !== \'__Rewire__\' &&\n\t\t\t\tpropertyName !== \'__ResetDependency__\' &&\n\n\t\t\t\tpropertyName !== \'__RewireAPI__\';\n\t});\n\n\treturn validPropertyNames.reduce(\n\t\tfunction(filteredWildcardImport, propertyName) {\n\t\t\tfilteredWildcardImport[propertyName] = wildcardImport[propertyName];\n\t\t\treturn filteredWildcardImport;\n\t\t}, {}\n\t);\n}\n');